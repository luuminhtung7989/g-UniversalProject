/*!
 * jQuery UI date range picker widget
 * Copyright (c) 2015 Tamble, Inc.
 * Licensed under MIT (https://github.com/tamble/jquery-ui-daterangepicker/raw/master/LICENSE.txt)
 *
 * Depends:
 *   - jQuery 1.8.3+
 *   - jQuery UI 1.9.0+ (widget factory, position utility, button, menu, datepicker)
 *   - moment.js 2.3.0+
 */
(function(n,t){function r(t,r,u){function s(){e="drp_autogen"+i++;n('label[for="'+t.attr("id")+'"]').attr("for",e)}function h(){s();f=n('<button type="button"><\/button>').addClass(r+"-triggerbutton").attr({title:t.attr("title"),tabindex:t.attr("tabindex"),id:e}).button({icons:{secondary:u.icon},label:u.initialText})}function c(){return f.button("option","label")}function o(n){f.button("option","label",n)}function l(){t.val("").change();o(u.initialText)}var f,e;return h(),{getElement:function(){return f},getLabel:c,setLabel:o,reset:l}}function u(t,i,r){function e(){f=n("<div><\/div>").addClass(t+"-presets");u=n("<ul><\/ul>");n.each(i.presetRanges,function(){n('<li><a href="#">'+this.text+"<\/a><\/li>").data("dateStart",this.dateStart).data("dateEnd",this.dateEnd).click(r).appendTo(u)});f.append(u);u.menu().data("ui-menu").delay=0}var f,u;return e(),{getElement:function(){return f}}}function f(t,i){function o(){u=n("<div><\/div>",{"class":t+"-calendar ui-widget-content"});u.datepicker(n.extend({},i.datepickerOptions,{beforeShowDay:h,onSelect:s}));e()}function s(t,u){var e=i.datepickerOptions.dateFormat||n.datepicker._defaults.dateFormat,f=n.datepicker.parseDate(e,t);if(!r.start||r.end?(r.start=f,r.end=null):f<r.start?(r.end=r.start,r.start=f):r.end=f,i.datepickerOptions.hasOwnProperty("onSelect"))i.datepickerOptions.onSelect(t,u)}function h(n){var u=[!0,r.start&&(+n==+r.start||r.end&&r.start<=n&&n<=r.end)?"ui-state-highlight":""],t=[!0,""];return i.datepickerOptions.hasOwnProperty("beforeShowDay")&&(t=i.datepickerOptions.beforeShowDay(n)),[u[0]&&t[0],u[1]+" "+t[1]]}function e(){setTimeout(function(){f();e()},moment().endOf("day")-moment())}function c(){r.start&&u.datepicker("setDate",r.start)}function f(){u.datepicker("refresh");u.datepicker("setDate",null)}function l(){r={start:null,end:null};f()}var u,r={start:null,end:null};return o(),{getElement:function(){return u},scrollToRangeStart:function(){return c()},getRange:function(){return r},setRange:function(n){r=n;f()},refresh:f,reset:l}}function e(t,i,r){function s(){u=n('<button type="button" class="ui-priority-primary"><\/button>').text(i.applyButtonText).button();f=n('<button type="button" class="ui-priority-secondary"><\/button>').text(i.clearButtonText).button();e=n('<button type="button" class="ui-priority-secondary"><\/button>').text(i.cancelButtonText).button();o=n("<div><\/div>").addClass(t+"-buttonpanel").append(u).append(f).append(e);h()}function h(){r&&(u.click(r.onApply),f.click(r.onClear),e.click(r.onCancel))}var o,u,f,e;return s(),{getElement:function(){return o}}}function o(i,o){function yt(){c=r(i,s,o);d=u(s,o,gt);l=f(s,o);v.numberOfMonths=o.datepickerOptions.numberOfMonths;v.numberOfMonths instanceof Array&&(o.autoFitCalendars=!1);rt=e(s,o,{onApply:function(){a();tt()},onClear:function(){a();ct()},onCancel:function(){a();nt()}});pt();v();nt();bt()}function pt(){h=n("<div><\/div>",{"class":s+" "+s+"-"+k[p]+" ui-widget ui-widget-content ui-corner-all ui-front"}).append(n("<div><\/div>",{"class":s+"-main ui-widget-content"}).append(d.getElement()).append(l.getElement())).append(n('<div class="ui-helper-clearfix"><\/div>').append(rt.getElement())).hide();i.hide().after(c.getElement());b=n("<div><\/div>",{"class":"ui-front "+s+"-mask"}).hide();n("body").append(b).append(h)}function v(){if(o.autoFitCalendars){var r=n(t).width(),f=h.outerWidth(!0),u=l.getElement(),i=u.datepicker("option","numberOfMonths"),e=i;if(f>r){while(i>1&&h.outerWidth(!0)>r)u.datepicker("option","numberOfMonths",--i);i!==e&&(v.monthWidth=(f-h.outerWidth(!0))/(e-i))}else while(i<v.numberOfMonths&&r-h.outerWidth(!0)>=v.monthWidth)u.datepicker("option","numberOfMonths",++i);lt();g=!1}}function wt(){h.remove();c.getElement().remove();i.show()}function bt(){c.getElement().click(vt);c.getElement().keydown(ni);b.click(a);n(t).resize(function(){y?v():g=!0})}function st(t){var i=o.dateFormat;return n.datepicker.formatDate(i,t.start)+(+t.end!=+t.start?o.rangeSplitter+n.datepicker.formatDate(i,t.end):"")}function kt(t){var r=o.altFormat,i={};return i.start=n.datepicker.formatDate(r,t.start),i.end=n.datepicker.formatDate(r,t.end),JSON.stringify(i)}function ht(t){var r=o.altFormat,i=null;if(t)try{i=JSON.parse(t,function(t,i){return t?n.datepicker.parseDate(r,i):i})}catch(u){}return i}function nt(){var n=ht(i.val());n?(c.setLabel(st(n)),l.setRange(n)):l.reset()}function tt(n){var t=n||l.getRange();t.start&&(t.end||(t.end=t.start),n&&l.setRange(t),c.setLabel(st(t)),i.val(kt(t)).change(),o.onChange&&o.onChange())}function dt(){return ht(i.val())}function ct(){c.reset();l.reset();i.val("")}function gt(){var t=n(this),i=t.data("dateStart")().startOf("day").toDate(),r=t.data("dateEnd")().startOf("day").toDate();return l.setRange({start:i,end:r}),o.applyOnMenuSelect&&(a(),tt()),!1}function lt(){h.position({my:"left top",at:"left bottom"+(o.verticalOffset<0?o.verticalOffset:"+"+o.verticalOffset),of:c.getElement(),collision:"flipfit flipfit",using:function(n,t){var e=t.element.left+t.element.width/2,a=t.target.left+t.target.width/2,r=p,u,v=t.element.top+t.element.height/2,y=t.target.top+t.target.height/2,i=w,f;p=e>a?ft:ut;p!==r&&(o.mirrorOnCollision&&(u=p===ut?d:l,h.children().first().append(u.getElement())),h.removeClass(s+"-"+k[r]),h.addClass(s+"-"+k[p]));h.css({left:n.left,top:n.top});w=v>y?ot:et;w!==i&&(i!==null&&c.getElement().removeClass(s+"-"+k[i]),c.getElement().addClass(s+"-"+k[w]));f=w===ot&&t.element.top-t.target.top!==t.target.height+o.verticalOffset||w===et&&t.target.top-t.element.top!==t.element.height+o.verticalOffset;c.getElement().toggleClass(s+"-vfit",f)}})}function at(n){n.preventDefault();n.stopPropagation()}function ni(t){switch(t.which){case n.ui.keyCode.UP:case n.ui.keyCode.DOWN:at(t);it();return;case n.ui.keyCode.ESCAPE:at(t);a();return;case n.ui.keyCode.TAB:a();return}}function it(){y||(c.getElement().addClass(s+"-active"),b.show(),y=!0,g&&v(),l.scrollToRangeStart(),h.show(),lt());o.onOpen&&o.onOpen()}function a(){y&&(h.hide(),b.hide(),c.getElement().removeClass(s+"-active"),y=!1);o.onClose&&o.onClose()}function vt(){y?a():it()}function ti(){return h}var s="comiseo-daterangepicker",h,b,c,d,l,rt,y=!1,g=!1,ut=0,ft=1,et=2,ot=3,k=["left","right","top","bottom"],p=ft,w=null;return yt(),{toggle:vt,destroy:wt,open:it,close:a,setRange:tt,getRange:dt,clearRange:ct,reset:nt,getContainer:ti}}var i=0;n.widget("comiseo.daterangepicker",{version:"0.4.0",options:{presetRanges:[{text:"Today",dateStart:function(){return moment()},dateEnd:function(){return moment()}},{text:"Yesterday",dateStart:function(){return moment().subtract("days",1)},dateEnd:function(){return moment().subtract("days",1)}},{text:"Last 7 Days",dateStart:function(){return moment().subtract("days",6)},dateEnd:function(){return moment()}},{text:"Last Week (Mo-Su)",dateStart:function(){return moment().subtract("days",7).isoWeekday(1)},dateEnd:function(){return moment().subtract("days",7).isoWeekday(7)}},{text:"Month to Date",dateStart:function(){return moment().startOf("month")},dateEnd:function(){return moment()}},{text:"Previous Month",dateStart:function(){return moment().subtract("month",1).startOf("month")},dateEnd:function(){return moment().subtract("month",1).endOf("month")}},{text:"Year to Date",dateStart:function(){return moment().startOf("year")},dateEnd:function(){return moment()}}],verticalOffset:0,initialText:"Select date range...",icon:"ui-icon-triangle-1-s",applyButtonText:"Apply",clearButtonText:"Clear",cancelButtonText:"Cancel",rangeSplitter:" - ",dateFormat:"M d, yy",altFormat:"yy-mm-dd",mirrorOnCollision:!0,applyOnMenuSelect:!0,autoFitCalendars:!0,onOpen:null,onClose:null,onChange:null,datepickerOptions:{numberOfMonths:3,maxDate:0}},_create:function(){this._dateRangePicker=o(this.element,this.options)},_destroy:function(){this._dateRangePicker.destroy()},open:function(){this._dateRangePicker.open()},close:function(){this._dateRangePicker.close()},setRange:function(n){this._dateRangePicker.setRange(n)},getRange:function(){return this._dateRangePicker.getRange()},clearRange:function(){this._dateRangePicker.clearRange()},widget:function(){return this._dateRangePicker.getContainer()}})})(jQuery,window);
//# sourceMappingURL=jquery.comiseo.daterangepicker.min.js.map
